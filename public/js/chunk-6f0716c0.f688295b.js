(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f0716c0"],{1476:function(t,a,s){"use strict";s("a1ba")},"15f7":function(t,a,s){t.exports=s.p+"img/avatar-111.faac8d0f.jpg"},"31f7":function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("header",{staticClass:"header"},[s("nav",{staticClass:"navbar navbar-expand-lg fixed-top  shadow navbar-light bg-white"},[s("div",{staticClass:"container-fluid"},[t._m(0),t._m(1),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarCollapse"}},[s("ul",{staticClass:"navbar-nav ml-auto"},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/buscador/horeca"}},[t._v("Buscador empresas HORECA")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/buscador/productores"}},[t._v("Buscador Productores")])],1),s("li",{staticClass:"nav-item dropdown ml-lg-3"},[t._m(2),s("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"userDropdownMenuLink"}},[s("router-link",{staticClass:"dropdown-item",attrs:{to:"../../admin/index"}},[t._v("Administración")]),s("router-link",{staticClass:"dropdown-item",attrs:{to:"../../admin/userlist"}},[t._v("Gestión Usuarios")]),s("router-link",{staticClass:"dropdown-item",attrs:{to:"../../admin/tareas-pendientes"}},[t._v("Pendiente de Aprobación ")]),s("div",{staticClass:"dropdown-divider"}),s("a",{staticClass:"dropdown-item",on:{click:function(a){return t.cerrarSesion()}}},[s("i",{staticClass:"fas fa-sign-out-alt mr-2 text-muted"}),t._v(" Cerrar Sesión")])],1)])])])])])])])},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex align-items-center"},[e("a",{staticClass:"navbar-brand py-1",attrs:{href:"https://www.saborgranada.es",target:"_blank",rel:"noopener"}},[e("img",{attrs:{src:s("cf05"),alt:"Sabor Granada logo"}})])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("button",{staticClass:"navbar-toggler navbar-toggler-right",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"}},[s("i",{staticClass:"fa fa-bars"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",{attrs:{id:"userDropdownMenuLink",href:"#","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e("img",{staticClass:"avatar avatar-sm avatar-border-primary mr-2",attrs:{src:s("15f7"),alt:""}})])}],o=s("5530"),r=s("2f62"),n={name:"HeaderAdmin",methods:Object(o["a"])({},Object(r["b"])(["cerrarSesion"]))},l=n,c=s("2877"),u=Object(c["a"])(l,e,i,!1,null,null,null);a["a"]=u.exports},"62c5":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"home"},[s("HeaderAdmin"),s("BodyAdminUserList"),s("GeneralFooter")],1)},i=[],o=s("31f7"),r=s("5745"),n=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"home"},[s("section",{staticClass:"py-5"},[s("div",{staticClass:"container"},[s("ol",{staticClass:"breadcrumb pl-0  justify-content-start"},[s("li",{staticClass:"breadcrumb-item"},[s("router-link",{attrs:{to:"index"}},[t._v("Administración")])],1),s("li",{staticClass:"breadcrumb-item active"},[t._v("Gestión de usuarios")])]),t._m(0),s("div",{staticClass:"text-block"},[t._m(1),s("div",{attrs:{id:""}},[s("form",{on:{submit:function(a){return a.preventDefault(),t.agregarUsuario()}}},[s("div",{staticClass:"row pt-4"},[s("div",{staticClass:"form-group col-md-6"},[s("label",{staticClass:"form-label",attrs:{for:"name"}},[t._v("Nombre Empresa")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.nuevoUsuario.nombre,expression:"nuevoUsuario.nombre"}],staticClass:"form-control",attrs:{type:"text",name:"name",id:"name",value:""},domProps:{value:t.nuevoUsuario.nombre},on:{input:function(a){a.target.composing||t.$set(t.nuevoUsuario,"nombre",a.target.value)}}})]),s("div",{staticClass:"form-group col-md-6"},[s("label",{staticClass:"form-label",attrs:{for:"date"}},[t._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.nuevoUsuario.email,expression:"nuevoUsuario.email"}],staticClass:"form-control",attrs:{type:"text",name:"date",id:"date",value:""},domProps:{value:t.nuevoUsuario.email},on:{input:function(a){a.target.composing||t.$set(t.nuevoUsuario,"email",a.target.value)}}})]),s("div",{staticClass:"form-group col-md-6"},[s("label",{staticClass:"form-label",attrs:{for:"form_category"}},[t._v("TIPO USUARIO")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.nuevoUsuario.role,expression:"nuevoUsuario.role"}],staticClass:"selectpicker form-control",attrs:{name:"category",id:"form_category","data-style":"btn-selectpicker",title:""},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.nuevoUsuario,"role",a.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"select",selected:""}},[t._v("Seleccionar")]),s("option",{attrs:{value:"HORECA_ROLE"}},[t._v("HORECA")]),s("option",{attrs:{value:"PRODUCER_ROLE"}},[t._v("PRODUCTOR")]),s("option",{attrs:{value:"ADMIN_ROLE"}},[t._v("ADMINISTRADOR")])])]),s("div",{staticClass:"form-group col-md-6"},[s("label",{staticClass:"form-label",attrs:{for:"password"}},[t._v("Contraseña")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.nuevoUsuario.password,expression:"nuevoUsuario.password"}],staticClass:"form-control",attrs:{type:"password",name:"password",id:"password",value:""},domProps:{value:t.nuevoUsuario.password},on:{input:function(a){a.target.composing||t.$set(t.nuevoUsuario,"password",a.target.value)}}})])]),s("button",{staticClass:"btn btn-outline-primary mb-4",attrs:{type:"submit"}},[t._v("Añadir Usuario")])])]),s("b-alert",{attrs:{show:t.dismissCountDown,dismissible:"",variant:t.mensaje.color},on:{dismissed:function(a){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[t._v(" "+t._s(t.mensaje.texto)+" ")])],1),s("div",{staticClass:"text-block"},[t._m(2),t._m(3),s("div",{staticClass:"tab-content",attrs:{id:"myTabContent"}},[s("div",{staticClass:"tab-pane fade show active",attrs:{id:"home",role:"tabpanel","aria-labelledby":"home-tab"}},[s("div",{staticClass:"list-group shadow mb-5"},t._l(t.productores,(function(a){return s("div",{key:a._id},[s("router-link",{staticClass:"list-group-item list-group-item-action p-4",attrs:{to:"../ficha-productor/"+a._id}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-4 align-self-center mb-4 mb-lg-0"},[s("div",{staticClass:"d-flex align-items-center mb-3"},[s("h2",{staticClass:"h5 mb-0"},[t._v(t._s(a.usuario.nombre||"Sin Nombre Definido"))]),s("img",{staticClass:"avatar avatar-sm avatar-border-white ml-3",attrs:{src:"../"+a.usuario.logo}})])]),s("div",{staticClass:"col-lg-8"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 col-md-4 col-lg-3 py-3 mb-3 mb-lg-0"},[s("h6",{staticClass:"label-heading"},[t._v("Teléfono")]),s("p",{staticClass:"text-sm font-weight-bold"},[t._v(t._s(a.telefono))])]),s("div",{staticClass:"col-6 col-md-4 col-lg-3 py-3"},[s("h6",{staticClass:"label-heading"},[t._v("Email")]),s("p",{staticClass:"text-sm font-weight-bold",staticStyle:{overflow:"auto"}},[t._v(t._s(a.usuario.email||"Sin Email Definido"))])]),s("div",{staticClass:"col-6 col-md-4 col-lg-3 py-3"},[s("h6",{staticClass:"label-heading"},[t._v("COMARCA")]),s("p",{staticClass:"text-sm font-weight-bold"},[t._v(t._s(a.zonaubicacion))])]),s("div",{staticClass:"col-12 col-lg-3 align-self-center"},[s("span",{staticClass:"text-primary text-sm text-uppercase mr-4 mr-lg-0"},[s("i",{staticClass:"fa fa-check fa-fw mr-2"}),t._v("VER FICHA")]),s("br",{staticClass:"d-none d-lg-block"}),s("span",{staticClass:"text-primary text-sm text-uppercase"},[s("i",{staticClass:"fa fa-trash fa-fw mr-2"}),t._v("Eliminar")])])])])])])],1)})),0),s("nav",{attrs:{"aria-label":"Page navigation example"}},[s("ul",{staticClass:"pagination pagination-template d-flex justify-content-center"},[s("li",{staticClass:"page-item"},[s("router-link",{staticClass:"page-link",attrs:{to:{query:{listaUsuarios:1}}}},[s("i",{staticClass:"fa fa-angle-left"})])],1),s("li",{staticClass:"page-item"},[s("router-link",{staticClass:"page-link",attrs:{to:{query:{listaUsuarios:2}}}},[s("i",{staticClass:"fa fa-angle-right"})])],1)])])]),s("div",{staticClass:"tab-pane fade",attrs:{id:"profile",role:"tabpanel","aria-labelledby":"profile-tab"}})])])])])])},l=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"d-flex justify-content-between align-items-end mb-5"},[s("h1",{staticClass:"hero-heading mb-0"},[t._v("Gestión de Usuarios")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col-sm-9"},[s("h5",[t._v("Añadir Nuevo Usuario")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-9"},[s("h5",[t._v("Usuarios Registrados")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ul",{staticClass:"nav nav-tabs",attrs:{id:"myTab",role:"tablist"}},[s("li",{staticClass:"nav-item",attrs:{role:"presentation"}},[s("a",{staticClass:"nav-link active",attrs:{id:"home-tab","data-toggle":"tab",href:"#home",role:"tab","aria-controls":"home","aria-selected":"true"}},[t._v("PRODUCTORES")])]),s("li",{staticClass:"nav-item",attrs:{role:"presentation"}},[s("a",{staticClass:"nav-link",attrs:{id:"profile-tab","data-toggle":"tab",href:"#profile",role:"tab","aria-controls":"profile","aria-selected":"false"}},[t._v("HORECA")])])])}],c=(s("99af"),s("5530")),u=s("2f62"),d={name:"BodyAdminUserList",data:function(){return{listaUsuarios:1,totalUsuarios:0,limite:9,productores:[],nuevoUsuario:{nombre:"",email:"",password:"",role:""},dismissSecs:5,dismissCountDown:0,mensaje:{color:"",texto:""}}},computed:Object(c["a"])({},Object(u["d"])(["token"])),methods:{paginacion:function(t){var a=this,s={headers:{token:this.token}},e=(t-1)*this.limite;this.axios.get("/productor?desde=".concat(e,"&limite=").concat(this.limite),s).then((function(t){a.productores=t.data.productor,console.log(a.productores),console.log(a.productores[0].usuario.nombre)})).catch((function(t){console.log(t)}))},listarUsuarios:function(){var t=this,a={headers:{token:this.token}};this.axios.get("/usuario",a).then((function(a){console.log(a.data),t.usuarios=a.data})).catch((function(t){console.log(t.response)}))},agregarUsuario:function(){var t=this,a={headers:{token:this.token}};this.axios.post("/usuario",this.nuevoUsuario,a).then((function(a){t.nuevoUsuario.nombre="",t.nuevoUsuario.email="",t.nuevoUsuario.role="",t.nuevoUsuario.password="",t.mensaje.color="success",t.mensaje.texto="Nuevo usuario creado:",t.showAlert(),t.usuarios.push(a.data)})).catch((function(a){a.response.data.err.message?t.mensaje.texto="No se añadión al usuario. ".concat(a.response.data.err.message,";"):t.mensaje.texto="Error de sistema",t.mensaje.color="danger",t.showAlert()}))},countDownChanged:function(t){this.dismissCountDown=t},showAlert:function(){this.dismissCountDown=this.dismissSecs}},watch:{"$route.query.listaUsuarios":{immediate:!0,handler:function(t){t=parseInt(t)||1,this.paginacion(t),this.listaUsuarios=t}}}},m=d,v=(s("1476"),s("2877")),p=Object(v["a"])(m,n,l,!1,null,null,null),f=p.exports,b={name:"AdminUserlistado",components:{HeaderAdmin:o["a"],GeneralFooter:r["a"],BodyAdminUserList:f}},C=b,g=Object(v["a"])(C,e,i,!1,null,null,null);a["default"]=g.exports},"99af":function(t,a,s){"use strict";var e=s("23e7"),i=s("d039"),o=s("e8b5"),r=s("861d"),n=s("7b0b"),l=s("50c4"),c=s("8418"),u=s("65f0"),d=s("1dde"),m=s("b622"),v=s("2d00"),p=m("isConcatSpreadable"),f=9007199254740991,b="Maximum allowed index exceeded",C=v>=51||!i((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),g=d("concat"),h=function(t){if(!r(t))return!1;var a=t[p];return void 0!==a?!!a:o(t)},_=!C||!g;e({target:"Array",proto:!0,forced:_},{concat:function(t){var a,s,e,i,o,r=n(this),d=u(r,0),m=0;for(a=-1,e=arguments.length;a<e;a++)if(o=-1===a?r:arguments[a],h(o)){if(i=l(o.length),m+i>f)throw TypeError(b);for(s=0;s<i;s++,m++)s in o&&c(d,m,o[s])}else{if(m>=f)throw TypeError(b);c(d,m++,o)}return d.length=m,d}})},a1ba:function(t,a,s){}}]);
//# sourceMappingURL=chunk-6f0716c0.f688295b.js.map